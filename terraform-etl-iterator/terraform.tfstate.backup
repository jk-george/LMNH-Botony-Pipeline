{
  "version": 4,
  "terraform_version": "1.9.7",
  "serial": 46,
  "lineage": "94eaf24b-1de8-2646-d071-34c2f3b95012",
  "outputs": {},
  "resources": [
    {
      "mode": "data",
      "type": "aws_ecr_repository",
      "name": "ETL-ecr-repo",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:ecr:eu-west-2:129033205317:repository/connect4-etl-ecr",
            "encryption_configuration": [
              {
                "encryption_type": "AES256",
                "kms_key": ""
              }
            ],
            "id": "connect4-etl-ecr",
            "image_scanning_configuration": [
              {
                "scan_on_push": true
              }
            ],
            "image_tag_mutability": "MUTABLE",
            "most_recent_image_tags": [
              "latest"
            ],
            "name": "connect4-etl-ecr",
            "registry_id": "129033205317",
            "repository_url": "129033205317.dkr.ecr.eu-west-2.amazonaws.com/connect4-etl-ecr",
            "tags": {}
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "mode": "data",
      "type": "aws_ecs_cluster",
      "name": "ecs_cluster",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:ecs:eu-west-2:129033205317:cluster/c14-ecs-cluster",
            "cluster_name": "c14-ecs-cluster",
            "id": "arn:aws:ecs:eu-west-2:129033205317:cluster/c14-ecs-cluster",
            "pending_tasks_count": 0,
            "registered_container_instances_count": 0,
            "running_tasks_count": 1,
            "service_connect_defaults": [],
            "setting": [
              {
                "name": "containerInsights",
                "value": "disabled"
              }
            ],
            "status": "ACTIVE",
            "tags": {}
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "mode": "data",
      "type": "aws_security_group",
      "name": "selected",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:ec2:eu-west-2:129033205317:security-group/sg-09cfa7d5cc78a795a",
            "description": "default VPC security group",
            "filter": null,
            "id": "sg-09cfa7d5cc78a795a",
            "name": "default",
            "tags": {},
            "timeouts": null,
            "vpc_id": "vpc-0344763624ac09cb6"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "mode": "data",
      "type": "aws_subnets",
      "name": "SUBNETS_IN_VPC",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "filter": [
              {
                "name": "vpc-id",
                "values": [
                  "vpc-0344763624ac09cb6"
                ]
              }
            ],
            "id": "eu-west-2",
            "ids": [
              "subnet-0497831b67192adc2",
              "subnet-05269405f24a15aee",
              "subnet-0acda1bd2efbf3922",
              "subnet-0465f224c7432a02e",
              "subnet-0ea4b735ba1242ac0",
              "subnet-021b1363799dcad0b"
            ],
            "tags": null,
            "timeouts": null
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "mode": "data",
      "type": "aws_vpc",
      "name": "VPC",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:ec2:eu-west-2:129033205317:vpc/vpc-0344763624ac09cb6",
            "cidr_block": "10.0.0.0/16",
            "cidr_block_associations": [
              {
                "association_id": "vpc-cidr-assoc-0bef5cea2ce208ff0",
                "cidr_block": "10.0.0.0/16",
                "state": "associated"
              }
            ],
            "default": false,
            "dhcp_options_id": "dopt-026a7201f48953bf2",
            "enable_dns_hostnames": true,
            "enable_dns_support": true,
            "enable_network_address_usage_metrics": false,
            "filter": null,
            "id": "vpc-0344763624ac09cb6",
            "instance_tenancy": "default",
            "ipv6_association_id": "",
            "ipv6_cidr_block": "",
            "main_route_table_id": "rtb-013c672848cf58ce9",
            "owner_id": "129033205317",
            "state": null,
            "tags": {
              "Name": "c14-VPC"
            },
            "timeouts": null
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_ecs_task_definition",
      "name": "etl-task-def",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ecs:eu-west-2:129033205317:task-definition/connect4-ETL-task:2",
            "arn_without_revision": "arn:aws:ecs:eu-west-2:129033205317:task-definition/connect4-ETL-task",
            "container_definitions": "[{\"cpu\":256,\"environment\":[{\"name\":\"ANOTHER_ENV_VAR\",\"value\":\"another_value\"},{\"name\":\"ENV_VAR_NAME\",\"value\":\"some_value\"}],\"essential\":true,\"image\":\"129033205317.dkr.ecr.eu-west-2.amazonaws.com/connect4-etl-ecr:latest\",\"logConfiguration\":{\"logDriver\":\"awslogs\",\"options\":{\"awslogs-region\":\"eu-west-2\",\"awslogs-stream-prefix\":\"ecs\",\"awslogs-group\":\"/ecs/connect4-ETL-task\"}},\"memory\":512,\"mountPoints\":[],\"name\":\"connect4-etl-task-container\",\"portMappings\":[{\"containerPort\":80,\"hostPort\":80,\"protocol\":\"tcp\"}],\"systemControls\":[],\"volumesFrom\":[]}]",
            "cpu": "256",
            "ephemeral_storage": [],
            "execution_role_arn": "arn:aws:iam::129033205317:role/connect4-ETL-task-exec-role",
            "family": "connect4-ETL-task",
            "id": "connect4-ETL-task",
            "inference_accelerator": [],
            "ipc_mode": "",
            "memory": "512",
            "network_mode": "awsvpc",
            "pid_mode": "",
            "placement_constraints": [],
            "proxy_configuration": [],
            "requires_compatibilities": [
              "FARGATE"
            ],
            "revision": 2,
            "runtime_platform": [
              {
                "cpu_architecture": "X86_64",
                "operating_system_family": "LINUX"
              }
            ],
            "skip_destroy": false,
            "tags": null,
            "tags_all": {},
            "task_role_arn": "arn:aws:iam::129033205317:role/connect4-ETL-task-exec-role",
            "track_latest": false,
            "volume": []
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "aws_iam_role.ecs_role",
            "data.aws_ecr_repository.ETL-ecr-repo"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "ecs_role",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::129033205317:role/connect4-ETL-task-exec-role",
            "assume_role_policy": "{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ecs.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}",
            "create_date": "2024-11-27T19:57:06Z",
            "description": "",
            "force_detach_policies": false,
            "id": "connect4-ETL-task-exec-role",
            "inline_policy": [],
            "managed_policy_arns": [],
            "max_session_duration": 3600,
            "name": "connect4-ETL-task-exec-role",
            "name_prefix": "",
            "path": "/",
            "permissions_boundary": "",
            "tags": null,
            "tags_all": {},
            "unique_id": "AROAR4CX2OZCZZA3QFV7G"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "scheduler_ecs_role",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::129033205317:role/connect4-scheduler-ETL-role",
            "assume_role_policy": "{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"scheduler.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}",
            "create_date": "2024-11-27T19:57:06Z",
            "description": "",
            "force_detach_policies": false,
            "id": "connect4-scheduler-ETL-role",
            "inline_policy": [],
            "managed_policy_arns": [],
            "max_session_duration": 3600,
            "name": "connect4-scheduler-ETL-role",
            "name_prefix": "",
            "path": "/",
            "permissions_boundary": "",
            "tags": null,
            "tags_all": {},
            "unique_id": "AROAR4CX2OZCV5FHKZ37S"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_role_policy_attachment",
      "name": "cloudwatch_logs_full_access",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "connect4-ETL-task-exec-role-20241127195707193500000003",
            "policy_arn": "arn:aws:iam::aws:policy/CloudWatchLogsFullAccess",
            "role": "connect4-ETL-task-exec-role"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_iam_role.ecs_role"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_role_policy_attachment",
      "name": "ec2_container_registry_readonly",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "connect4-ETL-task-exec-role-20241127195707337100000005",
            "policy_arn": "arn:aws:iam::aws:policy/AmazonEC2ContainerRegistryReadOnly",
            "role": "connect4-ETL-task-exec-role"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_iam_role.ecs_role"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_role_policy_attachment",
      "name": "ecs_full_access",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "connect4-ETL-task-exec-role-20241127195707202600000004",
            "policy_arn": "arn:aws:iam::aws:policy/AmazonECS_FullAccess",
            "role": "connect4-ETL-task-exec-role"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_iam_role.ecs_role"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_role_policy_attachment",
      "name": "scheduler_ecs_role_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "connect4-scheduler-ETL-role-20241127195707034400000002",
            "policy_arn": "arn:aws:iam::aws:policy/AmazonECS_FullAccess",
            "role": "connect4-scheduler-ETL-role"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_iam_role.scheduler_ecs_role"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_role_policy_attachment",
      "name": "scheduler_logs_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "connect4-scheduler-ETL-role-20241127195707032400000001",
            "policy_arn": "arn:aws:iam::aws:policy/CloudWatchLogsFullAccess",
            "role": "connect4-scheduler-ETL-role"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_iam_role.scheduler_ecs_role"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_scheduler_schedule",
      "name": "connect4-ETL-scheduler",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:scheduler:eu-west-2:129033205317:schedule/connect4-schedule-group/connect4-ETL-scheduler",
            "description": "",
            "end_date": "",
            "flexible_time_window": [
              {
                "maximum_window_in_minutes": 0,
                "mode": "OFF"
              }
            ],
            "group_name": "connect4-schedule-group",
            "id": "connect4-schedule-group/connect4-ETL-scheduler",
            "kms_key_arn": "",
            "name": "connect4-ETL-scheduler",
            "name_prefix": "",
            "schedule_expression": "cron(* * ? * * *)",
            "schedule_expression_timezone": "UTC",
            "start_date": "",
            "state": "ENABLED",
            "target": [
              {
                "arn": "arn:aws:ecs:eu-west-2:129033205317:cluster/c14-ecs-cluster",
                "dead_letter_config": [],
                "ecs_parameters": [
                  {
                    "capacity_provider_strategy": [],
                    "enable_ecs_managed_tags": false,
                    "enable_execute_command": false,
                    "group": "",
                    "launch_type": "FARGATE",
                    "network_configuration": [
                      {
                        "assign_public_ip": false,
                        "security_groups": [
                          "sg-09cfa7d5cc78a795a"
                        ],
                        "subnets": [
                          "subnet-021b1363799dcad0b",
                          "subnet-0465f224c7432a02e",
                          "subnet-0497831b67192adc2",
                          "subnet-05269405f24a15aee",
                          "subnet-0acda1bd2efbf3922",
                          "subnet-0ea4b735ba1242ac0"
                        ]
                      }
                    ],
                    "placement_constraints": [],
                    "placement_strategy": [],
                    "platform_version": "",
                    "propagate_tags": "",
                    "reference_id": "",
                    "tags": null,
                    "task_count": 1,
                    "task_definition_arn": "arn:aws:ecs:eu-west-2:129033205317:task-definition/connect4-ETL-task:2"
                  }
                ],
                "eventbridge_parameters": [],
                "input": "",
                "kinesis_parameters": [],
                "retry_policy": [
                  {
                    "maximum_event_age_in_seconds": 86400,
                    "maximum_retry_attempts": 185
                  }
                ],
                "role_arn": "arn:aws:iam::129033205317:role/connect4-scheduler-ETL-role",
                "sagemaker_pipeline_parameters": [],
                "sqs_parameters": []
              }
            ]
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_ecs_task_definition.etl-task-def",
            "aws_iam_role.ecs_role",
            "aws_iam_role.scheduler_ecs_role",
            "aws_scheduler_schedule_group.connect4-schedule-group",
            "data.aws_ecr_repository.ETL-ecr-repo",
            "data.aws_ecs_cluster.ecs_cluster",
            "data.aws_subnets.SUBNETS_IN_VPC"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_scheduler_schedule_group",
      "name": "connect4-schedule-group",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:scheduler:eu-west-2:129033205317:schedule-group/connect4-schedule-group",
            "creation_date": "2024-11-27T19:57:06Z",
            "id": "connect4-schedule-group",
            "last_modification_date": "2024-11-27T19:57:06Z",
            "name": "connect4-schedule-group",
            "name_prefix": "",
            "state": "ACTIVE",
            "tags": null,
            "tags_all": {},
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMDAsImRlbGV0ZSI6MzAwMDAwMDAwMDAwfX0="
        }
      ]
    }
  ],
  "check_results": null
}
